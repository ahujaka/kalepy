# To run a single environment:
#    tox -e py36
# To recreate environment:
#    tox --recreate

[tox]
envlist = python3.7, python3.8, python3.9, python3.10

[pytest]
norecursedirs = docs *.egg-info .git .tox

[testenv]
deps = -rrequirements-dev.txt
allowlist_externals = bash
    /bin/bash
# commands = bash {toxinidir}/scripts/tester.sh {posargs: -b -v}
commands = bash {toxinidir}/scripts/tester.sh {posargs: -b -v}

[flake8]
max-line-length=140
docstring-convention=all
ignore=
    F401   # imported but unused
    W293   # blank line contains whitespace
    E226   # missing whitespace around arithmetic operator
    E241   # multiple spaces after ','
    E722   # do not use bare 'except'
    E731   # do not assign a lambda expression, use a def
    C901   # is too complex (17)
per-file-ignores = init.ipy:E999
# exclude=
#     __pycache__,.cache,
#     venv,.venv,
#     build, dist,
#     error_codes.py,
#     .tox

[testenv:flake8]
skip_install = true
deps =
    flake8
commands =
    flake8 --exclude="holodeck/tests/converted_notebooks/*" holodeck